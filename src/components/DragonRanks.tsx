import React, { useEffect, useState } from 'react';
import { BurnData } from '../types/BurnData';

// 龍階 Dragon Ranks - Japanese/Samurai inspired holder tiers

interface Props {
  burnData: BurnData;
}

interface HolderStats {
  ryujin: number;      // Was poseidon
  shogun: number;      // Was whale
  daimyo: number;      // Was shark
  samurai: number;     // Was dolphin
  ronin: number;       // Was squid
  ashigaru: number;    // Was shrimp
  totalHolders: number;
  top10Percentage?: number;
}

const DragonRanks: React.FC<Props> = ({ burnData }) => {
  const totalSupply = burnData.totalSupply;
  const [holderStats, setHolderStats] = useState<HolderStats>({
    ryujin: 0,
    shogun: 0,
    daimyo: 0,
    samurai: 0,
    ronin: 0,
    ashigaru: 0,
    totalHolders: 0
  });
  const [loading, setLoading] = useState(true);

  useEffect(() => {
    const loadHolderStats = () => {
      try {
        if (burnData.holderStats) {
          setHolderStats({
            ryujin: burnData.holderStats.poseidon,
            shogun: burnData.holderStats.whale,
            daimyo: burnData.holderStats.shark,
            samurai: burnData.holderStats.dolphin,
            ronin: burnData.holderStats.squid,
            ashigaru: burnData.holderStats.shrimp,
            totalHolders: burnData.holderStats.totalHolders,
            top10Percentage: burnData.holderStats.top10Percentage
          });
        } else {
          setHolderStats({
            ryujin: 2,
            shogun: 8,
            daimyo: 45,
            samurai: 287,
            ronin: 1842,
            ashigaru: 3516,
            totalHolders: 984
          });
        }
        setLoading(false);
      } catch (error) {
        console.error('Error loading holder stats:', error);
        setLoading(false);
      }
    };
    loadHolderStats();
  }, [burnData]);

  // Realistic SVG icons from game-icons.net (CC BY 3.0 - Lorc, Delapouite)
  const classifications = [
    {
      name: '龍神 Ryūjin',
      subtitle: 'Dragon God',
      percentage: 10,
      amount: totalSupply * 0.1,
      holders: holderStats.ryujin,
      color: '#FFD700',
      gradientFrom: '#FFD700',
      gradientTo: '#FFA500',
      icon: (
        <svg width="44" height="44" viewBox="0 0 512 512" fill="currentColor">
          <path d="M200.947 18.686c-6.98.087-14.64.774-22.85 1.9 27.57 20.468 51.098 45.25 67.594 70.527 1.66 0 3.312.012 4.958.047 18.066.39 35.487 2.906 53.217 7.2-15.695-28.457-29.935-50.19-47.45-63.22-13.817-10.278-30.063-16.168-52.52-16.454-.967-.013-1.95-.013-2.948 0zm-91.66 22.96c-.73-.002-1.46.006-2.195.022-14.045.31-29.36 3.92-46.86 11.13 56.18 18.807 106.985 50.468 133.907 83.585 18.377-5.13 29.44-14.72 36.454-28.817C195.84 78.18 168.118 56.19 140.65 46.96c-10.168-3.418-20.433-5.306-31.363-5.315zm-.203 52.786c-39.42 6.758-74.73 31.854-87.822 74.19v322.345h212.73C100.352 442.58 61.19 206.49 187.115 230.104c5.838-14.164 9.92-28.027 11.018-41.465l18.627 1.522c-1.684 20.592-8.828 40.49-18.033 59.943-.732 2.035-1.472 4.12-2.186 6.063 32.842 85.24 113.77 160.69 169.495 168.197.915.033 1.905-.002 2.953-.09 17.016 1.035 35.86-4.222 52.21-22.304l7.984-8.83-10.473-5.658c-6.507-3.515-14.29-7.094-18.167-10.925-1.938-1.916-2.793-3.47-3.074-5.194-.282-1.725-.13-4.227 2.23-8.578l10.673-19.656-21.484 6.222c-6.304 1.825-17.305-3.032-23.224-10.71-2.96-3.84-4.408-7.907-4.387-10.843.02-2.938.72-5.125 4.747-8.05l19.453-14.125-23.884-2.72c-9.974-1.137-16.37-6.658-19.17-12.294-2.802-5.634-2.312-10.084 1.375-13.31l12.204-10.677-15.358-5.205c-6.717-2.276-10.296-7.555-10.357-10.633-.028-1.373.238-2.666 1.843-4.476 10.93-2.39 21.258-.45 28.088 6.374 6.154 6.146 8.35 15.128 6.977 24.832 8.55-2.254 16.985-1.616 24.112 2.494 9.34 5.387 14.647 15.692 15.67 27.965 15.212-10.132 32.152-12.725 45.262-5.164 15.467 8.92 21.36 29.513 16.805 51.75 23.992-33.355 34.588-75.717 5.617-120.43-46.726-4.442-81.693-30.676-93.293-67.64-5.026-16.016-21.284-28.67-42-37.904l-.08.217c-29.74-10.823-55.575-17.35-82.604-18.733l.08.155c-2.294-.093-4.56-.16-6.762-.172-9.537 22.874-28.662 39.9-57.436 46.054l-5.906 1.262-3.576-4.864c-14.216-19.33-41.23-40.452-74.002-58.074zm156.215 65.26c27.927-.073 44.874 11.617 42.09 44.45-35.844 3.39-51.933-16.683-63.074-42.632 7.507-1.155 14.538-1.8 20.983-1.817zm48.407 66.363c3.708.07 7.14.994 10.014 2.812a35.171 35.171 0 0 0-4.16 3.543c-5.246 5.24-8.087 12.122-7.956 18.742.183 9.322 5.27 17.184 12.68 22.56-3.14 8.103-2.452 17.455 1.407 25.22 3.813 7.668 10.54 14.273 19.302 18.398-1.445 3.366-2.375 6.862-2.4 10.33-.062 8.407 3.38 16.042 8.273 22.39 6.792 8.81 16.862 15.936 28.026 17.91-.183 2.18-.204 4.333.133 6.407 1.05 6.444 4.515 11.66 8.38 15.48 3.41 3.37 7.19 5.892 10.798 7.993-6.345 4.792-12.414 7.056-18.618 7.79-6.515-7.937-9.71-19.084-9.41-31.454-11.767 6.177-24.21 7.156-34.12 1.44-14.668-8.46-19.393-29.036-13.187-50.33-11.336 2.77-22.13.92-29.187-6.132-8.875-8.865-9.535-23.626-3.094-37.95-3.676-.615-6.963-2.166-9.525-4.725-8.808-8.798-5.773-26.09 6.776-38.626 7.843-7.835 17.546-11.957 25.87-11.8z"/>
        </svg>
      ),
      kanji: '龍'
    },
    {
      name: '将軍 Shōgun',
      subtitle: 'Supreme Commander',
      percentage: 1,
      amount: totalSupply * 0.01,
      holders: holderStats.shogun,
      color: '#E53935',
      gradientFrom: '#E53935',
      gradientTo: '#B71C1C',
      icon: (
        <svg width="44" height="44" viewBox="0 0 512 512" fill="currentColor">
          <path d="m356.1 32.57 50 25c-2.2 8.68-9.2 22.47-20.1 37.29C372.7 113 354.4 133.3 335.6 152c-18.7 18.8-38.1 36.2-53.5 48.7-7.7 6.2-14.5 11.3-19.6 14.6-2.5 1.6-4.6 2.9-6 3.6-.3.1-.3.1-.5.1s-.2 0-.5-.1c-1.4-.7-3.5-2-6-3.6-5.1-3.3-11.9-8.4-19.6-14.6-15.4-12.5-34.8-29.9-53.5-48.7-18.8-18.7-37.1-39-50.4-57.13-10.9-14.83-17.9-28.62-20.1-37.3l50-25c14.6 29.73 29.3 62.14 44.2 90.03 16.2 30.5 31.6 55.7 51.9 65.9l4 2 4-2c20.3-10.2 35.7-35.4 51.9-65.9 14.9-27.89 29.6-60.31 44.2-90.03zM256 141.4c7.9 0 15.5.7 22.7 1.9-8.2 12.2-16 21.5-22.7 26.5-6.7-5-14.5-14.3-22.7-26.5 7.2-1.2 14.8-1.9 22.7-1.9zm83.1 32.5c23.3 22.7 35.9 54.6 35.9 86.5v.6c-33-12-75.9-17.6-119-17.6-43.1 0-86 5.6-119 17.6v-.6c0-31.9 12.6-63.8 35.9-86.5 16.2 15.6 32.2 29.8 45.7 40.7 8 6.5 15.1 11.9 21 15.7 2.9 2 5.5 3.5 8 4.7 2.5 1.2 4.4 2.4 8.4 2.4s5.9-1.2 8.4-2.4 5.1-2.7 8-4.7c5.9-3.8 13-9.2 21-15.7 13.5-10.9 29.5-25.1 45.7-40.7zm64.3 38.3c20.6 20 31.5 26.2 63.8 37.3-12.6 24.9-25.9 47.1-57 61.2l-17.3-52c-.1-5.7-.5-11.4-1.3-17.1zm-294.8 0 11.8 29.4c-.8 5.7-1.2 11.4-1.3 17.1l-17.3 52c-31.11-14.1-44.41-36.3-57.01-61.2 32.3-11.1 43.2-17.3 63.81-37.3zM265 261.5c45.1.9 89.3 8.7 117.2 22.2l28.4 85-43.3-19.8c-3.9-23.6-6.3-46.3-6.3-58.5v-14.6l-13 6.5c-27.9 14-55.5 21.6-83 23zm-18 0v43.8c-27.5-1.4-55.1-9-83-23l-13-6.5v14.6c0 12.2-2.4 34.9-6.3 58.5l-43.3 19.8 28.4-85c27.9-13.5 72.1-21.3 117.2-22.2zm96.6 42.8c1.3 18.6 4.8 43.5 9.6 67.6 3 15.4 6.6 30.2 10.5 42.4 3.9 12.3 7.3 21.8 13.9 28.5l2.7 2.6h3.7c14.1 0 38.9 1.2 52.7 9.6-1.8 1.4-4.8 3.2-8.7 4.9-9.4 4-23.9 7.7-41.5 10.6-35.2 5.9-82.9 8.9-130.5 8.9-47.6 0-95.3-3-130.5-8.9-17.6-2.9-32.11-6.6-41.51-10.6-3.9-1.7-6.9-3.5-8.7-4.9 13.7-8.4 38.61-9.6 52.71-9.6h3.7l2.7-2.6c6.6-6.7 10-16.2 13.9-28.5 3.9-12.2 7.5-27 10.5-42.4 4.8-24.1 8.3-49 9.6-67.6 58 25.3 117.2 25.3 175.2 0z"/>
        </svg>
      ),
      kanji: '将'
    },
    {
      name: '大名 Daimyō',
      subtitle: 'Feudal Lord',
      percentage: 0.1,
      amount: totalSupply * 0.001,
      holders: holderStats.daimyo,
      color: '#7B1FA2',
      gradientFrom: '#7B1FA2',
      gradientTo: '#4A148C',
      icon: (
        <svg width="44" height="44" viewBox="0 0 512 512" fill="currentColor">
          <path d="m166.3 71.14 8.1 95.06-14.8 2.6-24.7-91.98 9 94.78-15.7 3-24.9-92.14 9.1 94.94-14.83 2.6L71.8 88.06 83.06 200.9l47.24-8.5L148 290c3.3-1.1 6.8-1.7 10.4-1.7 2.7 0 5.3.3 7.8 1l-18.1-100.1 47.2-8.5zm175.9 5.28c-3.3 29.88-14.3 61.48-27.2 55.48-12.2-5.6-8.9-19.2.4-34.25-15.1 10.75-36.3 17.65-22.4 46.65-14.9-8.5-10.7-25.2-12.9-39.2-21.5 16.1-14.4 43.8-5.7 66.2l11.9 3.5.5-25.2 10.2 18.3c12.2-5.1 12.4-8.5 19.8-15.4-4.7 9.2-7.2 19.2-18 26.5l7.9 2.6c22.9-5.3 57.3-45.6 35.5-105.18zm96.5 39.98c-19.8.2-47.8 21.4-33.6 45.4 13.5-59.9 69.2-13.1 62.9 7.8-8.5 28.2-29 25.9-37.3 40.6l14.4 5c64.9-24.2 43.8-95.6-4.5-98.7-.6 0-1.2-.1-1.9-.1zM155.21 238.99a406.8 406.8 0 0 0-13.33.13c-23.14.58-44.23 2.91-61.88 7.19-23.53 5.7-40.46 14.89-48.78 26.03-8.32 11.14-10.08 24.67-.97 45.53 32.86 75.26 117.19 130.26 207.85 148.59 90.66 18.33 186.1.15 242.28-66.75 13.59-16.18 15.3-29.31 9.94-43.22-5.36-13.9-19.59-28.87-40.78-42.75-14.75-9.65-32.69-18.74-52.75-27.03 1.51 22.59 3.56 44.88 5.12 65.97v.22c.61 11.4-5.49 21.58-14.34 27.94-8.85 6.35-20.27 10.08-33.44 12.4-26.34 4.66-60.03 3.4-93.34-2.19-33.32-5.58-66.09-15.46-90.28-29.31-12.1-6.92-22.15-14.85-28.88-24.47-6.73-9.62-9.76-21.55-6.59-33.37l.09-.38.13-.37c7.64-21.21 16.31-42.79 26.09-64.1a634 634 0 0 0-6.13-.07zm6.63 46.67a839 839 0 0 0-8.81 23.34c-1.6 6.25-.4 11.41 3.91 17.56 4.37 6.25 12.28 12.92 22.84 18.97 21.13 12.09 52.4 21.78 84.1 27.09 31.69 5.32 64.01 6.28 87 2.22 11.49-2.03 20.53-5.42 25.78-9.19 5.25-3.77 6.86-6.73 6.59-11.78-.52-6.93-1.09-14.03-1.69-21.25-7.45 4.03-16.47 6.37-26.72 7.81-22.73 3.21-51.79 1.67-81.03-3.53-29.24-5.2-58.5-14.06-81.22-26.5-11.36-6.22-21.12-13.34-28.37-21.81a59 59 0 0 1-2.38-2.94z"/>
        </svg>
      ),
      kanji: '大'
    },
    {
      name: '侍 Samurai',
      subtitle: 'Noble Warrior',
      percentage: 0.01,
      amount: totalSupply * 0.0001,
      holders: holderStats.samurai,
      color: '#00D4AA',
      gradientFrom: '#00D4AA',
      gradientTo: '#00896A',
      icon: (
        <svg width="44" height="44" viewBox="0 0 512 512" fill="currentColor">
          <path d="M482.403 42.826c-10.537-8.76-24.84-4.167-43.264 11.643-76.1 65.307-202.78 179.14-282.432 269.103l21.07 21.07c82.21-87.285 203.37-205.524 304.625-301.817zm-338.477 293.42-17.17 17.028 22.302 22.303a2546.608 2546.608 0 0 1 16.41-17.79zm-56.796.03-12.728 12.728 79.196 79.196 12.728-12.728zm2.942 54.185-60.475 60.475c.372 11.49 10.708 22.336 22.628 22.627l60.474-60.474-8.137-8.136c2.657 4.264 2.84 8.705.457 11.097-3.124 3.123-9.554 1.758-14.363-3.05 4.808 4.808 6.174 11.24 3.05 14.363-3.125 3.124-9.555 1.76-14.364-3.05 4.81 4.81 6.174 11.24 3.05 14.363-3.124 3.125-9.555 1.76-14.363-3.05 4.808 4.81 6.173 11.24 3.05 14.364-3.125 3.124-9.556 1.76-14.364-3.05 4.808 4.81 6.174 11.24 3.05 14.364-3.125 3.124-9.555 1.76-14.364-3.05-4.808-4.808-6.173-11.24-3.05-14.363 3.125-3.123 9.556-1.758 14.364 3.05-4.808-4.808-6.173-11.238-3.05-14.362 3.125-3.125 9.555-1.76 14.364 3.05-4.81-4.81-6.174-11.24-3.05-14.364 3.125-3.124 9.555-1.76 14.363 3.05-4.808-4.81-6.173-11.24-3.05-14.364 3.125-3.124 9.556-1.76 14.364 3.05-4.808-4.81-6.173-11.24-3.05-14.364 2.39-2.383 6.828-2.202 11.09.45z"/>
        </svg>
      ),
      kanji: '侍'
    },
    {
      name: '浪人 Rōnin',
      subtitle: 'Wandering Warrior',
      percentage: 0.001,
      amount: totalSupply * 0.00001,
      holders: holderStats.ronin,
      color: '#607D8B',
      gradientFrom: '#607D8B',
      gradientTo: '#455A64',
      icon: (
        <svg width="44" height="44" viewBox="0 0 512 512" fill="currentColor">
          <path d="M416.125 42.406c-57.576.457-104.863 25.804-144.813 64.875-41.984 41.063-75 97.61-100 155.5.78 4.503 3.06 8.946 7.094 13.658 5.158 6.024 13.183 12.113 23.188 17.593 20.01 10.962 47.79 19.545 75.5 24.47 27.71 4.925 55.505 6.21 75.156 3.438 9.825-1.386 17.538-3.91 21.813-6.563 4.274-2.653 4.916-3.957 4.812-6.625l.72-.03c-3.408-42.828-6-88.797.092-131.94 2.82-19.972 7.668-39.434 15.22-57.624-31.573 31.44-62.918 65.425-86.844 94.72 35.418-70.2 86.2-121.398 141.125-168.97-11.376-1.71-22.42-2.584-33.063-2.5zM155.21 238.994a406.802 406.802 0 0 0-13.334.131c-23.138.575-44.227 2.91-61.876 7.188-23.532 5.703-40.466 14.888-48.78 26.03-8.317 11.144-10.08 24.667-.97 45.532 32.86 75.263 117.185 130.26 207.844 148.594 90.66 18.33 186.108.147 242.28-66.75 13.59-16.185 15.297-29.312 9.938-43.22-5.358-13.908-19.586-28.878-40.78-42.75-14.745-9.65-32.683-18.737-52.75-27.03 1.506 22.59 3.555 44.877 5.124 65.967v.219c.607 11.402-5.49 21.585-14.344 27.938-8.853 6.353-20.268 10.08-33.437 12.406-26.337 4.654-60.026 3.398-93.344-2.188-33.317-5.585-66.085-15.466-90.28-29.312-12.097-6.923-22.145-14.85-28.875-24.47-6.73-9.617-9.76-21.554-6.594-33.374l.095-.375.125-.374c7.637-21.206 16.308-42.79 26.094-64.094a634.04 634.04 0 0 0-6.133-.068zm6.634 46.662A839.14 839.14 0 0 0 153.031 309c-1.595 6.246-.4 11.407 3.907 17.563 4.374 6.25 12.28 12.923 22.844 18.968 21.128 12.09 52.4 21.78 84.095 27.095 31.694 5.314 64.016 6.28 87 2.22 11.492-2.032 20.53-5.42 25.78-9.19 5.25-3.766 6.864-6.726 6.595-11.78-.517-6.93-1.088-14.027-1.688-21.25-7.448 4.03-16.47 6.367-26.718 7.813-22.732 3.206-51.79 1.665-81.03-3.532-29.242-5.196-58.5-14.055-81.22-26.5-11.36-6.222-21.122-13.34-28.375-21.812a58.994 58.994 0 0 1-2.376-2.938z"/>
        </svg>
      ),
      kanji: '浪'
    },
    {
      name: '足軽 Ashigaru',
      subtitle: 'Foot Soldier',
      percentage: 0.0001,
      amount: totalSupply * 0.000001,
      holders: holderStats.ashigaru,
      color: '#8D6E63',
      gradientFrom: '#8D6E63',
      gradientTo: '#5D4037',
      icon: (
        <svg width="44" height="44" viewBox="0 0 512 512" fill="currentColor">
          <path d="M84.42 249.7c-11.26 0-16.87 5.8-16.86 14.6 0 5-.56 11.1 4.48 14.1-2.53 7.9-5.51 15.5-8.74 23 4.58 1.5 8.79 4 12.5 7.2.14-.2.27-.4.41-.6 4.32-5.7 9.95-10.4 16.4-13.2 1.32-5.4 2.58-10.8 3.77-16.2 5.32-3 8.42-7.8 8.42-12.9 0-8.8-9.12-16-20.38-16zm269.48 44.7c-5.6 0-10.9 2.9-15.4 8.9-4.5 5.9-7.6 14.7-7.6 24.6 0 9.9 3.1 18.7 7.6 24.6 4.5 6 9.8 8.9 15.4 8.9s10.9-2.9 15.4-8.9c4.5-5.9 7.5-14.7 7.5-24.6 0-9.9-3-18.7-7.5-24.6-4.5-6-9.8-8.9-15.4-8.9zm-195.5 11.9c-5.6 0-10.9 2.9-15.4 8.9-4.5 5.9-7.6 14.7-7.6 24.6 0 9.9 3.1 18.7 7.6 24.6 4.5 6 9.8 8.9 15.4 8.9s10.9-2.9 15.4-8.9c4.5-5.9 7.5-14.7 7.5-24.6 0-9.9-3-18.7-7.5-24.6-4.5-6-9.8-8.9-15.4-8.9zM106 310c-5.6 0-10.94 2.9-15.4 8.9-1.13 1.5-2.17 3.2-3.1 5 3.92 8 6.09 17.3 6.09 27.2 0 6.2-.84 12.1-2.42 17.6l15.23 3.3 14.3-3c.8-1 1.7-2.2 2.3-3.2-3.6-7.7-5.6-16.6-5.6-26 0-7.6 1.3-14.8 3.6-21.4-4.4-5.6-9.5-8.4-15-8.4zm314.1 1.7c-5.6 0-10.9 2.9-15.4 8.9-4.5 5.9-7.5 14.7-7.5 24.6 0 3.7.4 7.2 1.2 10.4l17.9 3.9c0-1.3-.1-2.7-.1-4.1 0-13.6 4.1-26 11.2-35.5 1.1-1.4 2.3-2.8 3.5-4.1-3.3-2.8-7-4.1-10.8-4.1zm-367.46 5.9c-5.59 0-10.94 2.9-15.4 8.9-4.46 5.9-7.55 14.7-7.55 24.6 0 9.9 3.09 18.7 7.55 24.6 4.46 6 9.81 8.9 15.4 8.9s10.94-2.9 15.4-8.9c4.46-5.9 7.55-14.7 7.55-24.6 0-9.9-3.09-18.7-7.55-24.6-4.46-6-9.81-8.9-15.4-8.9zm148.96 2.2c-1.7 0-3.5.3-5.1.9 1.8 5.9 2.8 12.4 2.8 19.1 0 10.3-2.3 19.8-6.4 28l26.4 5.8c-.7-3.8-1.1-7.8-1.1-11.9 0-8.1 1.5-15.8 4.1-22.6-1.3-4-3.1-7.6-5.3-10.4-4.5-6-9.8-8.9-15.4-8.9zm255.6 2.1c-5.6 0-10.9 2.9-15.4 8.9-4.5 5.9-7.6 14.7-7.6 24.6.1 9.9 3.1 18.7 7.6 24.6 4.5 6 9.8 8.9 15.4 8.9s10.9-2.9 15.4-8.9c4.5-5.9 7.6-14.7 7.6-24.6 0-9.9-3.1-18.7-7.6-24.6-4.5-6-9.8-8.9-15.4-8.9zm-198 6.3c-5.6 0-10.9 2.9-15.4 8.9-4.5 5.9-7.6 14.7-7.6 24.6 0 9.9 3.1 18.7 7.6 24.6 4.5 6 9.8 8.9 15.4 8.9s10.9-2.9 15.4-8.9c4.5-5.9 7.6-14.7 7.6-24.6 0-9.9-3.1-18.7-7.6-24.6-4.5-6-9.8-8.9-15.4-8.9zm-79 55.2c-6.2 4.9-13.6 7.9-21.8 7.9-7.9 0-15.2-2.8-21.3-7.4l-31.8 6.8L129.4 494h67.7l.4-3.3c-3.6-35.3-7.4-70.6-10.9-105.9zm-97.77 3.2c-7.11 9.4-17.73 16-29.79 16-11.6 0-21.86-6.1-28.94-14.9l-5.7 1.2v66.9l8.15 38.2h70.28l5.27-39.7-15.94-68.4c-1.81-.5-2.37-.6-3.33.7zm343.17 1.7c-10 2.2-19.7 4.7-29.4 7.6l9.2 98.1h84.5l4.1-30.6v-70.9c-2.4-.8-5-1.4-7-1.6-7.1 9.4-17.7 16-29.8 16-14.2-2-24.8-8.4-31.6-18.6zm-197 7.8-22.4 3.4 9.7 94.5h83.4l9.1-93.7-19.2-3.4c-.1.1-.1.2-.2.3-7.1 9.4-17.7 16-29.8 16-13.2-1.9-24.1-8-30.6-17.1z"/>
        </svg>
      ),
      kanji: '兵'
    }
  ];

  const formatNumber = (num: number) => {
    if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
    if (num >= 1000) return (num / 1000).toFixed(0) + 'K';
    return num.toLocaleString();
  };

  return (
    <div className="dragon-ranks-container">
      {/* Header with Japanese styling */}
      <div className="dragon-ranks-header">
        <div className="header-content">
          <div className="title-section">
            <h2 className="main-title">
              <span className="kanji-accent">龍階</span> Dragon Ranks
            </h2>
            <p className="subtitle">Holder classification by supply percentage</p>
          </div>
          <div className="header-stats">
            <div className="stat-item">
              <span className="stat-label">Total Warriors</span>
              <span className="stat-value">{holderStats.totalHolders.toLocaleString()}</span>
            </div>
          </div>
        </div>
      </div>

      {loading ? (
        <div className="loading-container">
          <div className="loading-spinner"></div>
          <span>Summoning ranks...</span>
        </div>
      ) : (
        <div className="ranks-grid">
          {classifications.map((rank, index) => (
            <div
              key={index}
              className="rank-card"
              style={{
                '--rank-color': rank.color,
                '--gradient-from': rank.gradientFrom,
                '--gradient-to': rank.gradientTo,
              } as React.CSSProperties}
            >
              {/* Decorative corner */}
              <div className="rank-corner"></div>

              <div className="rank-header">
                <div className="rank-icon" style={{ color: rank.color }}>
                  {rank.icon}
                </div>
                <div className="rank-title-group">
                  <div className="rank-name">{rank.name}</div>
                  <div className="rank-subtitle">{rank.subtitle}</div>
                </div>
                <div className="rank-kanji" style={{ color: rank.color }}>
                  {rank.kanji}
                </div>
              </div>

              <div className="rank-threshold">
                <span className="threshold-value" style={{ color: rank.color }}>
                  {rank.percentage}%+
                </span>
                <span className="threshold-label">of supply</span>
              </div>

              <div className="rank-metrics">
                <div className="metric">
                  <span className="metric-value">{rank.holders.toLocaleString()}</span>
                  <span className="metric-label">Holders</span>
                </div>
                <div className="metric">
                  <span className="metric-value">{formatNumber(rank.amount)}</span>
                  <span className="metric-label">Min TINC</span>
                </div>
              </div>

              <div className="rank-bar">
                <div
                  className="rank-fill"
                  style={{
                    width: `${Math.min((rank.holders / Math.max(...classifications.map(c => c.holders))) * 100, 100)}%`,
                    background: `linear-gradient(90deg, ${rank.gradientFrom}, ${rank.gradientTo})`
                  }}
                ></div>
              </div>

              <div className="rank-footer">
                {((rank.holders / holderStats.totalHolders) * 100).toFixed(1)}% of warriors
              </div>
            </div>
          ))}
        </div>
      )}

      {/* Summary */}
      <div className="ranks-summary">
        <div className="summary-header">
          <h3><span className="kanji-small">概要</span> Overview</h3>
          <span className="last-updated">
            {burnData.fetchedAt ? new Date(burnData.fetchedAt).toLocaleString() : ''}
          </span>
        </div>
        <div className="summary-metrics">
          <div className="summary-item">
            <span className="summary-label">Elite Ranks (龍神 + 将軍)</span>
            <span className="summary-value">{holderStats.ryujin + holderStats.shogun}</span>
          </div>
          {holderStats.top10Percentage !== undefined && (
            <div className="summary-item">
              <span className="summary-label">Top 10 Control</span>
              <span className="summary-value">{holderStats.top10Percentage.toFixed(2)}%</span>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

export default DragonRanks;
